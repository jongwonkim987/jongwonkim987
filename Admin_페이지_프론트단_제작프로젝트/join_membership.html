<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>회원 가입</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <main class="container py-5" style="max-width: 500px">
      <h1 class="h4 mb-4 text-center">회원 가입</h1>

      <form id="join-form">
        <!-- 아이디 -->
        <div class="mb-3">
          <label for="user-id" class="form-label">아이디</label>
          <input
            type="text"
            class="form-control"
            id="user-id"
            placeholder="사용하실 아이디를 입력해주세요"
            required
          />
          <strong>*영문, 숫자가 조합된 4~12자이어야합니다.</strong>
        </div>

        <!-- 비밀번호 -->
        <div class="mb-3">
          <label for="user-pw" class="form-label">비밀번호</label>
          <input
            type="password"
            class="form-control"
            id="user-pw"
            placeholder="사용하실 비밀번호를 입력해주세요"
            required
          />
          <strong
            >*영문, 숫자, 특수문자를 포함한 8자 이상 30자 미만이어야
            합니다.</strong
          >
        </div>

        <!-- 비밀번호 확인 -->
        <div class="mb-3">
          <label for="user-pw-check" class="form-label">비밀번호 확인</label>
          <input
            type="password"
            class="form-control"
            id="user-pw-check"
            placeholder="비밀번호를 다시 입력해주세요."
            required
          />
        </div>

        <!-- 이름 -->
        <div class="mb-3">
          <label for="user-name" class="form-label">이름</label>
          <input
            type="text"
            class="form-control"
            id="user-name"
            placeholder="사용하실 이름을 입력해주세요"
            required
          />
        </div>

        <!-- 전화번호 -->
        <div class="mb-3">
          <label for="user-phone" class="form-label">전화번호</label>
          <input
            type="text"
            class="form-control"
            id="user-phone"
            placeholder="-없이 숫자만 입력해주세요."
            required
          />
        </div>

        <!-- 성별 -->
        <div class="mb-3">
          <label class="form-label d-block">성별</label>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="gender"
              id="gender-m"
              value="남"
              required
            />
            <label class="form-check-label" for="gender-m">남</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="gender"
              id="gender-f"
              value="여"
            />
            <label class="form-check-label" for="gender-f">여</label>
          </div>
        </div>

        <!-- 이메일 -->
        <div class="mb-3">
          <label for="user-email" class="form-label">이메일</label>
          <input type="email" class="form-control" id="user-email" required />
        </div>

        <!-- 버튼 -->
        <div class="d-grid gap-2 mt-4">
          <button type="submit" class="btn btn-primary">가입하기</button>
          <a href="main_page.html" class="btn btn-outline-secondary">
            돌아가기
          </a>
        </div>
      </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      function isValidId(id) {
        // 길이 검사
        if (id.length < 4 || id.length > 12) return false;
        // 영문 포함
        const hasLetter = /[A-Za-z]/.test(id);
        // 숫자 포함
        const hasNumber = /\d/.test(id);
        // 영문+숫자만 허용
        const onlyAlphaNum = /^[A-Za-z0-9]+$/.test(id);
        return hasLetter && hasNumber && onlyAlphaNum;
      }

      function isValidPassword(pw) {
        if (pw.length < 8 || pw.length >= 30) return false;
        const hasLetter = /[A-Za-z]/.test(pw);
        const hasNumber = /\d/.test(pw);
        const hasSpecial = /[!@#$%^&*()_\-+=\[{\]};:'",.<>/?\\|`~]/.test(pw);
        return hasLetter && hasNumber && hasSpecial;
      }
      document
        .getElementById('join-form')
        .addEventListener('submit', function (e) {
          e.preventDefault();

          const id = document.getElementById('user-id').value.trim();
          const pw = document.getElementById('user-pw').value;
          const pwCheck = document.getElementById('user-pw-check').value;
          if (!isValidId(id)) {
            alert('아이디는 영문과 숫자를 조합한 4~12자여야 합니다.');
            return;
            if (!isValidPassword(pw)) {
              alert(
                '비밀번호는 영문, 숫자, 특수문자를 포함한 8자 이상 30자 미만이어야 합니다.',
              );
              return;
            }
            if (pw !== pwCheck) {
              alert('비밀번호가 일치하지 않습니다.');
              return;
            }
          }
          const name = document.getElementById('user-name').value.trim();
          const phone = document.getElementById('user-phone').value.trim();
          const email = document.getElementById('user-email').value.trim();
          const gender = document.querySelector(
            'input[name="gender"]:checked',
          ).value;

          // 전화번호 숫자만 검사
          if (!/^\d+$/.test(phone)) {
            alert('전화번호는 숫자만 입력해주세요.');
            return;
          }

          // 가입 완료 알림
          alert(
            `회원가입 완료!\n\n` +
              `아이디: ${id}\n` +
              `이름: ${name}\n` +
              `전화번호: ${phone}\n` +
              `성별: ${gender}\n` +
              `이메일: ${email}`,
          );

          // 필요 시 이동
          // location.href = 'index.html';
        });
    </script>
  </body>
</html>
